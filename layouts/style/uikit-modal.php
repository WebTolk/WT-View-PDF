<?php
/**
 * @package       Content - WT View PDF
 * @version       1.0.0
 * @Author        Sergey Tolkachyov, https://web-tolk.ru
 * @copyright     Copyright (c) 2022-2025 Sergey Tolkachyov
 * @license       GNU/GPL http://www.gnu.org/licenses/gpl-3.0.html
 * @since         1.0.0
 */

use Joomla\CMS\Factory;

defined('_JEXEC') or die;

/** @var array $displayData */

extract($displayData);

/**
 * @var string   $filePath
 * @var boolean  $first
 */

$app = Factory::getApplication();
$document = $app->getDocument();
$wa = $document->getWebAssetManager();

$wa->useScript('plg_content_wtviewpdf.uikit.modal');
?>
<button
        class="uk-button uk-button-default uk-margin-small-right"
        type="button"
        uk-toggle="target: #modal-wtviewpdf"
        data-file-url="<?php echo $filePath; ?>"
>
	<?php echo $filePath; ?>
</button>

<?php if ($first) { ?>
<style>
    #modal-wtviewpdf .uk-modal-dialog {
        width: 100%;
        height: 100vh;
        margin: 0;
        max-width: none;
        display: flex;
        flex-direction: column;
    }

    #modal-wtviewpdf .uk-modal-body {
        flex-grow: 1;
        overflow-y: auto;
    }

    #modal-wtviewpdf .uk-modal-footer {
        background: #f8f8f8;
        border-top: 1px solid #e5e5e5;
        flex-shrink: 0;
    }

    .fullscreen-modal {
        width: 100vw;
        min-height: 100vh;
    }
</style>

<div id="modal-wtviewpdf" class="uk-modal-full fullscreen-modal" uk-modal>
    <div class="uk-modal-dialog">
        <button class="uk-modal-close-full uk-close-large" type="button" uk-close></button>

        <div class="uk-modal-body uk-padding-small">
            <div
                    class="uk-flex uk-width-1-1 uk-height-1-1 uk-flex-center uk-flex-middle uk-background-default"
                    id="modal-loader"
            >
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve"
                     class="daykerov-circle-arrow-top"
                     viewBox="0 0 768 768"
                     width="150px" height="150px"
                     xmlns:xlink="http://www.w3.org/1999/xlink">
                     <defs>
                         <style type="text/css">
                             <![CDATA[
                             .fil0 {
                                 fill: #24367D;
                                 fill-rule: nonzero
                             }

                             ]]>
                         </style>
                     </defs>

                    <path id="daykerov-circle-arrow-circle" class="fil0"
                          d="M722.89 203.32c5.24,10.64 6.52,20.31 3.82,28.99 -2.7,8.69 -9.28,15.63 -19.74,20.78 -10.46,5.16 -20.08,6.09 -28.83,2.78 -8.76,-3.3 -16,-10.75 -21.71,-22.31l-4.57 -9.28 11.45 -5.64 5.21 10.57c6.59,13.36 17.06,16.49 31.4,9.42 14.07,-6.93 18.03,-16.6 11.92,-28.99l-5.92 -12.01 11.39 -5.62 5.58 11.31 0 0zm-82.82 4.39c14.49,-21.54 28.94,-43.12 43.38,-64.69l8.89 12.37c-14.43,21.57 -28.93,43.11 -43.4,64.66l-8.86 -12.34 -0.01 0zm17.72 -94.13c17.58,17.76 17.02,35.46 -0.53,52.84 -17.57,17.38 -35.4,17.61 -52.95,-0.12 -17.61,-17.79 -17.08,-35.6 0.51,-53.01 17.68,-17.5 35.36,-17.5 52.97,0.29zm-9.19 9.02c-11.52,-11.65 -21.8,-8.23 -32.4,2.26 -11.66,11.55 -11.33,23.56 -2.66,32.31 8.67,8.76 20.67,9.22 32.34,-2.33 11.66,-11.54 11.35,-23.53 2.73,-32.24l-0.01 0zm-25.62 -34.19c-21.7,14.24 -43.41,28.47 -65.1,42.74l-12.24 -9c21.7,-14.24 43.38,-28.52 65.1,-42.73l12.24 8.99 0 0zm-69.42 -48.82c10.47,5.58 17.15,12.68 20.03,21.31 2.87,8.63 1.58,18.1 -3.9,28.39 -5.49,10.3 -12.76,16.66 -21.79,19.09 -9.04,2.43 -19.27,0.61 -30.65,-5.46l-9.13 -4.86 6 -11.26 10.4 5.54c13.15,7.01 23.48,3.44 31,-10.68 7.38,-13.84 4.95,-24 -7.24,-30.49l-11.81 -6.3 5.97 -11.21 11.12 5.93 0 0zm-68.43 50.58c-1.14,-25.94 -2.33,-51.88 -3.53,-77.81l14.5 4.67c1.2,25.93 2.33,51.87 3.49,77.8l-14.46 -4.66zm-41.66 -86.25c24.7,3.85 34.76,18.42 30.96,42.82 -3.81,24.42 -18.02,35.2 -42.67,31.36 -24.73,-3.86 -34.89,-18.5 -31.07,-42.96 3.83,-24.58 18.05,-35.08 42.78,-31.22zm-2.03 12.71c-16.18,-2.53 -22.43,6.33 -24.72,21.06 -2.53,16.22 4.87,25.68 17.05,27.58 12.17,1.9 22.1,-4.86 24.63,-21.08 2.53,-16.22 -4.84,-25.68 -16.96,-27.56zm-40.92 -12.29c-9,24.35 -18.01,48.69 -26.99,73.05l-15.2 0.04c9,-24.35 17.97,-48.71 27.01,-73.05l15.18 -0.04zm-84.84 1.95c11.73,-1.73 21.33,0.02 28.77,5.26 7.44,5.23 12.02,13.62 13.72,25.16 1.7,11.54 -0.36,20.97 -6.19,28.29 -5.83,7.33 -15.14,11.94 -27.9,13.82l-10.23 1.5 -1.86 -12.62 11.66 -1.72c14.74,-2.17 20.93,-11.17 18.6,-27 -2.29,-15.52 -10.28,-22.25 -23.94,-20.23l-13.25 1.95 -1.85 -12.57 12.47 -1.84zm-23.55 80.88c-16.22,-20.27 -32.49,-40.51 -48.75,-60.74l14.46 -4.78c16.27,20.22 32.48,40.5 48.72,60.75l-14.43 4.77 0 0zm-84.51 -45.06c22.2,-11.47 38.93,-5.64 50.25,16.31 11.33,21.96 6.22,39.05 -15.95,50.49 -22.24,11.48 -39.08,5.65 -50.44,-16.35 -11.4,-22.11 -6.11,-38.98 16.13,-50.45l0.01 0zm5.85 11.46c-14.56,7.51 -14.37,18.34 -7.53,31.59 7.52,14.59 19.08,17.86 30.03,12.21 10.95,-5.65 14.98,-16.96 7.45,-31.55 -7.53,-14.59 -19.05,-17.88 -29.95,-12.25zm-40.29 14.22c7.1,24.97 14.18,49.94 21.3,74.9l-12.24 9c-7.1,-24.97 -14.23,-49.93 -21.29,-74.91l12.23 -8.99 0 0zm-67.35 51.63c8.45,-8.33 17.23,-12.57 26.33,-12.73 9.09,-0.16 17.74,3.9 25.92,12.22 8.18,8.31 12.08,17.15 11.69,26.5 -0.38,9.35 -5.18,18.57 -14.37,27.61l-7.37 7.25 -8.95 -9.09 8.4 -8.27c10.61,-10.45 10.3,-21.37 -0.92,-32.77 -11,-11.18 -21.42,-11.91 -31.26,-2.22l-9.55 9.39 -8.91 -9.05 8.99 -8.84 0 0zm29.48 78.15c-25.02,-6.91 -50.07,-13.76 -75.11,-20.6l8.91 -12.36c25.04,6.84 50.06,13.75 75.09,20.63l-8.89 12.33 0 0zm-94.88 13.07c11.26,-22.31 28.22,-27.4 50.27,-16.26 22.06,11.14 27.94,27.97 16.69,50.24 -11.28,22.35 -28.34,27.5 -50.44,16.34 -22.2,-11.21 -27.81,-27.98 -16.53,-50.32l0.01 0zm11.46 5.85c-7.38,14.62 -0.88,23.29 12.43,30.01 14.66,7.4 25.94,3.27 31.49,-7.73 5.55,-11 2.18,-22.53 -12.47,-29.93 -14.66,-7.4 -25.92,-3.3 -31.45,7.65l0 0zm-24.28 35.15c20.39,16.06 40.77,32.13 61.18,48.17l-4.64 14.47c-20.4,-16.06 -40.82,-32.09 -61.18,-48.18l4.64 -14.46 0 0zm-24.28 81.32c1.97,-11.7 6.59,-20.29 13.86,-25.75 7.28,-5.47 16.66,-7.25 28.17,-5.31 11.5,1.93 19.84,6.81 25.01,14.6 5.18,7.8 6.69,18.08 4.55,30.8l-1.71 10.19 -12.58 -2.11 1.95 -11.62c2.47,-14.69 -4.19,-23.36 -19.97,-26.01 -15.46,-2.6 -24.33,2.92 -26.62,16.54l-2.22 13.21 -12.53 -2.11 2.09 -12.43zm69.77 43.97c-24.38,8.93 -48.75,17.91 -73.1,26.89l0.07 -15.23c24.35,-8.99 48.73,-17.91 73.09,-26.86l-0.06 15.2zm-69.62 65.79c-3.8,-24.71 7.05,-38.7 31.46,-42.46 24.43,-3.76 39,6.53 42.79,31.18 3.81,24.74 -7.08,38.85 -31.54,42.62 -24.59,3.78 -38.9,-6.61 -42.71,-31.34zm12.73 -1.91c2.49,16.19 12.82,19.46 27.56,17.19 16.22,-2.49 23,-12.41 21.13,-24.58 -1.87,-12.18 -11.32,-19.6 -27.54,-17.11 -16.23,2.5 -23.01,12.38 -21.15,24.5l0 0zm0.67 42.72c25.93,1.22 51.86,2.45 77.79,3.63l4.63 14.48c-25.93,-1.22 -51.86,-2.4 -77.79,-3.65l-4.63 -14.46 0 0zm27.52 80.28c-5.2,-10.66 -6.43,-20.34 -3.69,-29.01 2.74,-8.67 9.34,-15.58 19.83,-20.69 10.48,-5.11 20.1,-6 28.84,-2.66 8.75,3.34 15.96,10.83 21.61,22.42l4.53 9.29 -11.47 5.59 -5.16 -10.59c-6.53,-13.39 -16.99,-16.57 -31.37,-9.56 -14.1,6.87 -18.1,16.52 -12.05,28.94l5.87 12.03 -11.42 5.57 -5.52 -11.33 0 0zm84.26 -1.95c-14.41,21.6 -28.78,43.23 -43.13,64.86l-8.94 -12.34c14.35,-21.63 28.77,-43.22 43.16,-64.82l8.91 12.31 0 -0.01zm-17.37 94.2c-17.64,-17.7 -17.15,-35.4 0.34,-52.84 17.5,-17.45 35.33,-17.75 52.95,-0.08 17.67,17.72 17.21,35.54 -0.32,53.02 -17.61,17.56 -35.3,17.62 -52.97,-0.1zm9.15 -9.05c11.57,11.6 21.84,8.14 32.4,-2.39 11.62,-11.59 11.24,-23.59 2.54,-32.32 -8.7,-8.72 -20.7,-9.14 -32.33,2.45 -11.62,11.59 -11.26,23.57 -2.61,32.26l0 0zm25.76 34.09c21.64,-14.32 43.3,-28.63 64.93,-42.98l12.29 8.95c-21.65,14.33 -43.28,28.68 -64.95,42.97l-12.27 -8.94 0 0zm69.59 48.57c-10.49,-5.54 -17.2,-12.63 -20.1,-21.25 -2.91,-8.61 -1.65,-18.09 3.79,-28.4 5.45,-10.31 12.7,-16.71 21.72,-19.17 9.03,-2.46 19.27,-0.68 30.67,5.35l9.14 4.82 -5.95 11.29 -10.42 -5.5c-13.18,-6.96 -23.49,-3.36 -30.96,10.79 -7.33,13.87 -4.87,24.02 7.35,30.47l11.84 6.25 -5.94 11.23 -11.14 -5.88 0 0zm63.59 -52.46c0.82,25.95 1.69,51.9 2.57,77.85l-14.44 -4.85c-0.89,-25.94 -1.7,-51.89 -2.54,-77.84l14.4 4.84 0.01 0zm40.59 86.75c-24.64,-4.15 -34.53,-18.84 -30.42,-43.2 4.1,-24.37 18.44,-34.97 43.04,-30.83 24.68,4.16 34.66,18.92 30.55,43.34 -4.13,24.53 -18.48,34.85 -43.17,30.69l0 0zm2.19 -12.68c16.16,2.72 22.51,-6.06 24.98,-20.76 2.73,-16.19 -4.56,-25.74 -16.71,-27.79 -12.15,-2.04 -22.16,4.59 -24.89,20.78 -2.72,16.19 4.53,25.73 16.62,27.77zm40.77 12.78c9.3,-24.23 18.61,-48.47 27.88,-72.71l15.19 0.15c-9.29,24.23 -18.56,48.49 -27.89,72.71l-15.18 -0.15zm84.86 -0.91c-11.76,1.58 -21.33,-0.28 -28.7,-5.61 -7.38,-5.33 -11.86,-13.77 -13.42,-25.32 -1.56,-11.56 0.62,-20.97 6.54,-28.22 5.92,-7.26 15.28,-11.75 28.07,-13.48l10.24 -1.38 1.71 12.65 -11.68 1.57c-14.76,1.99 -21.07,10.92 -18.93,26.78 2.1,15.54 10.01,22.37 23.69,20.52l13.27 -1.79 1.7 12.59 -12.49 1.69 0 0zm25.23 -80.8c16.02,20.43 32.08,40.83 48.15,61.22l-14.51 4.64c-16.07,-20.38 -32.08,-40.82 -48.12,-61.23l14.48 -4.63 0 0zm84.07 45.9c-22.33,11.24 -38.99,5.25 -50.1,-16.81 -11.11,-22.07 -5.83,-39.11 16.45,-50.33 22.36,-11.26 39.14,-5.26 50.27,16.85 11.19,22.22 5.73,39.03 -16.62,50.29zm-5.75 -11.52c14.63,-7.37 14.55,-18.2 7.85,-31.52 -7.39,-14.66 -18.91,-18.04 -29.91,-12.5 -11.01,5.54 -15.15,16.81 -7.77,31.48 7.39,14.66 18.88,18.06 29.83,12.54zm40.43 -13.82c-6.85,-25.04 -13.69,-50.08 -20.56,-75.11l12.34 -8.87c6.85,25.03 13.73,50.06 20.54,75.11l-12.32 8.86 0 0.01zm67.86 -50.96c-8.54,8.24 -17.36,12.4 -26.45,12.47 -9.1,0.07 -17.71,-4.08 -25.81,-12.48 -8.09,-8.39 -11.9,-17.27 -11.43,-26.61 0.48,-9.35 5.37,-18.52 14.65,-27.47l7.44 -7.18 8.86 9.18 -8.48 8.18c-10.72,10.35 -10.51,21.27 0.59,32.79 10.89,11.28 21.31,12.11 31.25,2.52l9.63 -9.3 8.82 9.15 -9.07 8.75 0 0zm-29.01 -78.05c24.94,7.2 49.91,14.33 74.87,21.47l-9.05 12.25c-24.96,-7.13 -49.9,-14.33 -74.85,-21.49l9.03 -12.23 0 0zm95.03 -11.98c-11.53,22.18 -28.55,27.07 -50.46,15.69 -21.93,-11.39 -27.62,-28.3 -16.12,-50.44 11.54,-22.21 28.66,-27.17 50.62,-15.76 22.08,11.47 27.49,28.3 15.96,50.51l0 0zm-11.4 -5.98c7.55,-14.54 1.14,-23.28 -12.09,-30.15 -14.57,-7.57 -25.89,-3.57 -31.57,7.37 -5.68,10.93 -2.44,22.5 12.13,30.06 14.56,7.57 25.87,3.6 31.53,-7.28zm24.69 -34.87c-20.21,-16.29 -40.41,-32.6 -60.63,-48.87l4.81 -14.41c20.2,16.29 40.44,32.56 60.62,48.88l-4.8 14.4zm25.2 -81.04c-2.1,11.68 -6.82,20.22 -14.16,25.6 -7.33,5.38 -16.74,7.05 -28.22,4.98 -11.48,-2.06 -19.76,-7.03 -24.84,-14.89 -5.09,-7.86 -6.49,-18.15 -4.2,-30.85l1.83 -10.17 12.56 2.26 -2.09 11.6c-2.64,14.66 3.92,23.4 19.66,26.23 15.44,2.78 24.37,-2.64 26.81,-16.23l2.38 -13.18 12.5 2.25 -2.23 12.4zm-69.12 -49.7c24.34,-9.04 48.66,-18.13 72.98,-27.22l0 15.23c-24.31,9.1 -48.65,18.13 -72.98,27.18l0 -15.2 0 0.01zm69.32 -66.1c3.91,24.69 -6.88,38.73 -31.27,42.6 -24.41,3.86 -39.02,-6.36 -42.93,-31 -3.91,-24.72 6.91,-38.88 31.36,-42.75 24.57,-3.89 38.92,6.43 42.84,31.15zm-12.72 1.96c-2.56,-16.18 -12.91,-19.4 -27.63,-17.07 -16.22,2.57 -22.95,12.51 -21.03,24.68 1.93,12.17 11.41,19.55 27.62,16.98 16.22,-2.56 22.96,-12.47 21.04,-24.59l0 0zm-0.86 -42.72c-25.93,-1.09 -51.87,-2.21 -77.8,-3.28l-4.7 -14.46c25.94,1.1 51.88,2.17 77.81,3.31l4.69 14.43z"/>
                    <text class="fil0" font-size="80" y="410"
                          x="200">загрузка...</text>
                </svg>
            </div>
            <div class="pdf-container d-flex flex-column ">

            </div>
        </div>

        <div class="uk-modal-footer uk-padding-small">
            <progress class="uk-progress" value="0" max="100"></progress>
        </div>
    </div>
</div>
<?php } ?>
