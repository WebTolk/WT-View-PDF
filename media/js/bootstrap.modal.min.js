document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("wtviewpdf");e&&(e.addEventListener("show.bs.modal",(t=>{const o=t.relatedTarget.getAttribute("data-file-url"),n=e.querySelector(".modal-body > .pdf-container");let a=document.getElementById("modal-loader");!function(e){e.classList.remove("d-none"),e.classList.add("z-1")}(a);var{pdfjsLib:r}=globalThis;(async function(e){const t=r.getDocument(e),o=await t.promise,n=[];for(let e=1;o.numPages>=e;e++){const t=await o.getPage(e),a=t.getViewport({scale:2}),r=document.createElement("canvas"),d=r.getContext("2d");r.height=a.height,r.width=a.width,r.setAttribute("data-page-num",e);const s={canvasContext:d,viewport:a};await t.render(s).promise,n.push(r)}return n})(window.location.origin+"/"+o).then((e=>{e.forEach((e=>{n.appendChild(e)}))})).catch((()=>{})).then((()=>{!function(e){e.classList.add("d-none"),e.classList.remove("z-1")}(a),function(){const t=e.querySelector(".modal-body > .pdf-container"),o=e.querySelector(".modal-body"),n=e.querySelector(".progress"),a=e.querySelector(".progress .progress-bar");n.setAttribute("aria-valuenow",0),a.style.width="0%";let r=t.offsetHeight-o.offsetHeight,d=0;o.addEventListener("scroll",(()=>{d=100*o.scrollTop/r,n.setAttribute("aria-valuenow",d),a.style.width=d+"%"}))}()}))})),e.addEventListener("hidden.bs.modal",(()=>{e.querySelector(".modal-body > .pdf-container").innerHTML=""})))}));